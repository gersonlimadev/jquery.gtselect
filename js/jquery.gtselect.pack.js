/**
 * jQuery gtSelect plugin
 * @author Gerson Thiago <http://www.gersonthiago.com> <https://github.com/gersonthiago/jquery.gtselect>
**/
;(function(e){e.fn.gtselect=function(t){function s(t,s){this.el=e(t);this.options=e.extend({},n,s);this.el.wrap('<div class="gtSelect" data-status="disabled" />');this.select=e(t).parent(".gtSelect");this.el.css("display","none");this.selectDisabled=typeof this.el.attr("disabled")!=="undefined"?true:false;var o="",u=this.select.find("option"),a="",f="",l=0,c=typeof this.el.attr("id")==="string"?"select_"+this.el.attr("id"):"select"+i;width=this.el.width(),fieldChecked={value:e(u[0]).attr("value"),text:e(u[0]).text()};for(var h=0;h<u.length;h++){if(e(u[h]).attr("selected")=="selected"){fieldChecked={value:e(u[h]).val(),text:e(u[h]).text()}}a+='<li data-val="'+e(u[h]).val()+'">'+e(u[h]).text()+"</li>"}if(typeof this.options.height!=="undefined"){f='style="max-height:'+this.options.height+'px;" data-scroll="true"'}if(typeof this.options.width==="undefined"){this.options.width=width}o+='<span class="bg"></span>';o+='<p class="activeOption">'+fieldChecked.text+"</p>";o+='<div class="listSelect" '+f+">";if(f!==""){o+='<div class="scroll" style="max-height:'+this.options.height+'px; overflow-x:hidden; overflow-y:auto;">'}o+="<ul>"+a+"</ul>";if(f!==""){o+="</div>"}o+="</div>";o+='<span class="arrow arrowDown">Down</span>';this.select.addClass(c).css({width:this.options.width+"px",zIndex:r}).append(o);if(!this.selectDisabled){this.appendEvents()}r--;i++}var n={speed:200,width:undefined,height:undefined,linkRedirect:false,change:undefined,effect:"slide"},r=100,i=0;s.prototype.appendEvents=function(){function u(r){var o=r.keyCode?r.keyCode:r.which,u="",a=[];if(typeof s!=="undefined"){clearTimeout(s)}switch(o){case 48:u="0";break;case 96:u="0";break;case 49:u="1";break;case 97:u="1";break;case 50:u="2";break;case 98:u="2";break;case 51:u="3";break;case 99:u="3";break;case 52:u="4";break;case 100:u="4";break;case 53:u="5";break;case 101:u="5";break;case 54:u="6";break;case 102:u="6";break;case 55:u="7";break;case 103:u="7";break;case 56:u="8";break;case 104:u="8";break;case 57:u="9";break;case 105:u="9";break;case 65:u="a";break;case 66:u="b";break;case 67:u="c";break;case 68:u="d";break;case 69:u="e";break;case 70:u="f";break;case 71:u="g";break;case 72:u="h";break;case 73:u="i";break;case 74:u="j";break;case 75:u="k";break;case 76:u="l";break;case 77:u="m";break;case 78:u="n";break;case 79:u="o";break;case 80:u="p";break;case 81:u="q";break;case 82:u="r";break;case 83:u="s";break;case 84:u="t";break;case 85:u="u";break;case 86:u="v";break;case 87:u="w";break;case 88:u="x";break;case 89:u="y";break;case 90:u="z";break}if(u!==""){i+=u;s=setTimeout(function(){i="";t.find("li").css({opacity:1})},1500)}t.find("li").each(function(n){var r=e(this),s=0;if(r.text().substr(0,i.length).toLowerCase()==i&&r.attr("data-val")!==""){if(t.find(".scroll").length>0){s=n*(r.height()+parseInt(r.css("paddingTop").replace("px",""))+parseInt(r.css("paddingTop").replace("px","")))}r.css({opacity:1});a.push({el:t.find("option[value="+r.attr("data-val")+"]"),val:r.attr("data-val"),top:s})}else{r.css({opacity:.3})}});if(a.length==1){t.find("select option").attr("selected",false);a[0].el.attr("selected",true);t.find("li[data-val="+a[0].val+"]").trigger("click")}else if(a.length>1){if(t.find(".scroll").length>0){t.find(".scroll").animate({scrollTop:a[0].top},n.speed)}}else{t.find("li").css({opacity:1})}}var t=this.select,n=this.options,r="",i="",s=undefined;var o=function(e,r){t.find("select option").attr("selected",false);t.find('select option[value="'+e+'"]').attr("selected",true);t.find(".activeOption").text(r);if(n.change!==undefined){n.change(e,r,t)}t.find("select").trigger("change")};t.bind("mouseenter mouseleave click",function(i){var s=e(this),u=s.attr("data-status");if(i.type=="click"){if(u=="disabled"){s.find(".arrow").removeClass("arrowDown").addClass("arrowUp").text("Up");s.attr("data-status","waiting");if(n.effect=="slide"){s.find(".listSelect").slideDown(n.speed,function(){s.attr("data-status","enabled")})}else if(n.effect=="fade"){s.find(".listSelect").fadeIn(n.speed,function(){s.attr("data-status","enabled")})}}else{s.find(".arrow").removeClass("arrowUp").addClass("arrowDown").text("Down");s.attr("data-status","waiting");if(n.effect=="slide"){s.find(".listSelect").slideUp(n.speed,function(){s.attr("data-status","disabled")})}else if(n.effect=="fade"){s.find(".listSelect").fadeOut(n.speed,function(){s.attr("data-status","disabled")})}t.find("li").css({opacity:1});if(i.target.nodeName.toLowerCase()=="li"){if(n.linkRedirect){if(i.target.getAttribute("data-val")!=""){location.href=i.target.getAttribute("data-val")}}else{o(e(i.target).attr("data-val"),e(i.target).text())}}}}else if(i.type=="mouseenter"){if(u=="enabled"){clearTimeout(r)}}else{if(u=="enabled"){r=setTimeout(function(){t.trigger("click")},1e3)}}});e("html").bind("keydown",function(e){if(t.attr("data-status")=="enabled"){u(e)}});e("html").bind("click",function(n){if(e(n.target).parents(".gtSelect").length==0){if(t.attr("data-status")=="enabled"){clearTimeout(r);t.trigger("click")}}})};return this.each(function(){new s(this,t)})}})(jQuery);